{% assign section_classes = "home-section--content" %}
{% assign section_heading = section.settings.section_heading %}
{% if section_heading == blank %}
  {% assign section_classes = section_classes | append: " no-section-heading" %}
{% endif %}
{% assign heading = section.settings.heading %}
{% assign subheading = section.settings.subheading %}
{% assign first_button_label = section.settings.first_button_label %}
{% assign second_button_label = section.settings.second_button_label %}
{% assign first_button_link = section.settings.first_button_link %}
{% assign second_button_link = section.settings.second_button_link %}
{% assign image = section.settings.image %}
{% assign crop = section.settings.crop %}
{% assign desktop_height = section.settings.desktop_height %}
{% assign mobile_height = section.settings.mobile_height %}
{% assign desktop_image_alignment = section.settings.desktop_image_alignment %}
{% assign mobile_image_alignment = section.settings.mobile_image_alignment %}
{% assign text_alignment = section.settings.text_alignment %}

<script type="application/pxs-animation-mapping+json">
  {
    "blocks": [".image-with-text"],
    "elements": [".image-with-text__heading", ".image-with-text__text", ".image-with-text__button"]
  }
</script>

<section class="animation_with_txt_container" data-section-id="{{ section.id }}">
  <div class="animation_with_txt">
    <div class="animation__content">
      {%-
          if heading != blank
          or subheading != blank
          or button_label != blank
          or button_link != blank
       -%}
       <div class="animation__content-wrapper">
          {%- if heading != blank -%}
            <h2 class="animation__heading">{{ heading | escape }}</h2>
          {%- endif -%}
          {%- if subheading -%}
            <div class="animation__text">{{ subheading }}</div>
          {%- endif -%}
          {%- if
            first_button_label != blank
            and first_button_link != blank
          -%}
            <a class="first__button" href="{{ first_button_link }}">{{ first_button_label }}</a>
          {%- endif -%}
          {%- if
            second_button_label != blank
            and second_button_link != blank
          -%}
            <a class="first__button" href="{{ second_button_link }}">{{ second_button_label }}</a>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
    <div class="animation__image-wrapper">
      {%- if image != blank -%}
        {% assign alt = image.alt | default: heading %}
        {% assign crop = crop | default: 'center' %}
        {% capture image_classes %}animation__image{% endcapture %}
        {%
          render 'rimg'
          img: image,
          alt: alt,
          size: '1500x',
          lazy: true,
          crop: crop,
          class: image_classes,
        %}
      {%- else -%}
        {% capture placeholder_classes %}{{ base_name }}__image {{ base_name }}__placeholder{% endcapture %}
        {{ 'collection-1' | placeholder_svg_tag: placeholder_classes }}
      {%- endif -%}
    </div>
  </div>
</section>
{% comment %}Inject @pixelunion/pxs-image-with-text/image-with-text end{% endcomment %}


{% schema %}
{
  "name": "Animation with Text",
  "class": "animation-with-text--section",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Text"
    },
    {
      "id": "heading",
      "type": "text",
      "label": "Heading",
      "default": "Image with text"
    },
    {
      "id": "subheading",
      "type": "richtext",
      "label": "Subheading",
      "default": "<p>Pair large text with an image to give focus to your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
    },
    {
      "id": "first_button_label",
      "type": "text",
      "label": "Button label",
      "default": "Button Text"
    },
    {
      "id": "first_button_link",
      "type": "url",
      "label": "Button link"
    },
    {
      "id": "second_button_label",
      "type": "text",
      "label": "Button label"
    },
    {
      "id": "second_button_link",
      "type": "url",
      "label": "Button link"
    }
  ],
  "presets": [
    {
      "category": "Image",
      "name": "Animation with text",
      "settings": {}
    }
  ]
}

{% endschema %}